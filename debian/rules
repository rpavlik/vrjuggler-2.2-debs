#!/usr/bin/make -f

include /usr/share/cdbs/1/rules/debhelper.mk
include /usr/share/cdbs/1/class/autotools.mk
#include /usr/share/cdbs/1/rules/patchsys-quilt.mk

DEB_CONFIGURE_SCRIPT := $(CURDIR)/$(DEB_SRCDIR)/configure.pl
DEB_CONFIGURE_EXTRA_FLAGS := --with-boost-includes=/usr/include --with-java-orb=JDK \
							--with-gmtl=/usr --with-openal=/usr --with-audiere=/usr
DEB_INSTALL_DOCS_ALL := $(CURDIR)/AUTHORS $(CURDIR)/ChangeLog $(CURDIR)/README

DEB_MAKE_BUILD_TARGET = BUILD_PROF_C=N BUILD_PROF_CXX=N build install prefix=$(DEB_DESTDIR)/usr
DEB_MAKE_CLEAN_TARGET = clean
DEB_MAKE_ENVVARS += VJ_BASE_DIR=$(DEB_DESTDIR)
#DEB_CONFIGURE_PREFIX =$(DEB_DESTDIR)usr

DEB_BUILDDIR = $(CURDIR)/debian/build

FLAGS = -Wno-deprecated
FLAGS += -I$(DEB_DESTDIR)/usr/include/vpr-2.0
FLAGS += -I$(DEB_DESTDIR)/usr/include/jccl-1.2
FLAGS += -I$(DEB_DESTDIR)/usr/include/gadgeteer-1.2
FLAGS += -I$(DEB_DESTDIR)/usr/include/tweek-1.2
FLAGS += -I$(DEB_DESTDIR)/usr/include/sonix-1.2
FLAGS += -I$(DEB_DESTDIR)/usr/include/vrjuggler-2.2

CXXFLAGS += $(FLAGS)
CFLAGS += $(FLAGS)

clean::
	-rm -f config.log config.status Makefile debian/*~
	-rm -rf debian/build


# workaround for http://bugs.debian.org/526392
#QUILT_PATCH_DIR := debian/patches
#QUILT_STAMPFN := patch
#-include /usr/share/topgit/tg2quilt.mk
